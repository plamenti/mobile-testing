group 'com.pragmatic'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'checkstyle'

sourceCompatibility = 1.9
targetCompatibility = 1.9
compileJava.options.encoding = 'UTF-8'

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'org.testng', name: 'testng', version: '6.14.3'
    compile group: 'io.appium', name: 'java-client', version: '6.0.0-BETA5'
}

// Force checks on build and test tasks.
build.dependsOn(check)
test.dependsOn(check)

// Do not run tests in check task (only run checkstyle).
check.dependsOn.remove(test)

// Define test tasks
task calc_iPhone7_iOS113(type: Test, description: 'Web UI Tests', group: 'Verification') {

    systemProperty 'appConfig', 'src/test/resources/config/calc_iphone7_ios113.properties'

    include "**/calc/tests/**"

    useTestNG() {
        //report generation delegated to TestNG library:
        useDefaultListeners = true
    }

    //turn off Gradle's HTML report to avoid replacing the
    //reports generated by TestNG library:
    reports.html.enabled = false

    testLogging {
        showStandardStreams = false

        exceptionFormat "full"
        events "passed", "skipped", "failed"
    }
}

task calc_emu_android60(type: Test, description: 'Web UI Tests', group: 'Verification') {

    systemProperty 'appConfig', 'src/test/resources/config/calc_emu_android60.properties'

    useTestNG() {
        //report generation delegated to TestNG library:
        useDefaultListeners = true
        suites 'src/test/resources/suites/calc.xml'
    }

    //turn off Gradle's HTML report to avoid replacing the
    //reports generated by TestNG library:
    reports.html.enabled = false

    testLogging {
        showStandardStreams = false

        exceptionFormat "full"
        events "passed", "skipped", "failed"
    }
}